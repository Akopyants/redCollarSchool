{"version":3,"sources":["tingle.js"],"names":["root","factory","define","amd","exports","module","tingle","this","isBusy","Modal","options","opts","i","arguments","length","key","hasOwnProperty","extend","onClose","onOpen","beforeOpen","beforeClose","stickyFooter","footer","cssClass","closeLabel","closeMethods","init","_recalculateFooterPosition","modalBoxFooter","style","width","modalBox","clientWidth","left","offsetLeft","_build","modal","document","createElement","classList","add","indexOf","display","forEach","item","modalCloseBtn","type","modalCloseBtnIcon","innerHTML","modalCloseBtnLabel","appendChild","modalBoxContent","_buildFooter","_bindEvents","_events","clickCloseBtn","close","bind","clickOverlay","_handleClickOutside","resize","checkOverflow","keyboardNav","_handleKeyboardNav","addEventListener","window","event","which","isOpen","scrollbarWidth","offsetWidth","clickedOnScrollbar","clientX","isScrollable","scrollHeight","offsetHeight","navigator","platform","el","cls","parentElement","contains","_findAncestor","target","_unbindEvents","removeEventListener","prototype","call","body","firstChild","addFooter","_busy","state","_isBusy","destroy","parentNode","removeChild","open","removeProperty","removeAttribute","getSelection","removeAllRanges","_scrollPosition","pageYOffset","top","setStickyFooter","force","remove","scrollTo","behavior","setContent","content","getContent","setFooterContent","getFooterContent","isSticky","isOverflow","clientHeight","addFooterBtn","label","callback","btn","split","console","warn","viewportHeight","innerHeight"],"mappings":"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","file":"../src/libs.min.js","sourcesContent":["/* global define, module */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory)\n  } else if (typeof exports === 'object') {\n    module.exports = factory()\n  } else {\n    root.tingle = factory()\n  }\n}(this, function () {\n  /* ----------------------------------------------------------- */\n  /* == modal */\n  /* ----------------------------------------------------------- */\n\n  var isBusy = false\n\n  function Modal (options) {\n    var defaults = {\n      onClose: null,\n      onOpen: null,\n      beforeOpen: null,\n      beforeClose: null,\n      stickyFooter: false,\n      footer: false,\n      cssClass: [],\n      closeLabel: 'Close',\n      closeMethods: ['overlay', 'button', 'escape']\n    }\n\n    // extends config\n    this.opts = extend({}, defaults, options)\n\n    // init modal\n    this.init()\n  }\n\n  Modal.prototype.init = function () {\n    if (this.modal) {\n      return\n    }\n\n    _build.call(this)\n    _bindEvents.call(this)\n\n    // insert modal in dom\n    document.body.appendChild(this.modal, document.body.firstChild)\n\n    if (this.opts.footer) {\n      this.addFooter()\n    }\n\n    return this\n  }\n\n  Modal.prototype._busy = function (state) {\n    isBusy = state\n  }\n\n  Modal.prototype._isBusy = function () {\n    return isBusy\n  }\n\n  Modal.prototype.destroy = function () {\n    if (this.modal === null) {\n      return\n    }\n\n    // restore scrolling\n    if (this.isOpen()) {\n      this.close(true)\n    }\n\n    // unbind all events\n    _unbindEvents.call(this)\n\n    // remove modal from dom\n    this.modal.parentNode.removeChild(this.modal)\n\n    this.modal = null\n  }\n\n  Modal.prototype.isOpen = function () {\n    return !!this.modal.classList.contains('tingle-modal--visible')\n  }\n\n  Modal.prototype.open = function () {\n    if (this._isBusy()) return\n    this._busy(true)\n\n    var self = this\n\n    // before open callback\n    if (typeof self.opts.beforeOpen === 'function') {\n      self.opts.beforeOpen()\n    }\n\n    if (this.modal.style.removeProperty) {\n      this.modal.style.removeProperty('display')\n    } else {\n      this.modal.style.removeAttribute('display')\n    }\n\n    // prevent text selection when opening multiple times\n    document.getSelection().removeAllRanges()\n\n    // prevent double scroll\n    this._scrollPosition = window.pageYOffset\n    document.body.classList.add('tingle-enabled')\n    document.body.style.top = -this._scrollPosition + 'px'\n\n    // sticky footer\n    this.setStickyFooter(this.opts.stickyFooter)\n\n    // show modal\n    this.modal.classList.add('tingle-modal--visible')\n\n    // onOpen callback\n    if (typeof self.opts.onOpen === 'function') {\n      self.opts.onOpen.call(self)\n    }\n\n    self._busy(false)\n\n    // check if modal is bigger than screen height\n    this.checkOverflow()\n\n    return this\n  }\n\n  Modal.prototype.close = function (force) {\n    if (this._isBusy()) return\n    this._busy(true)\n    force = force || false\n\n    //  before close\n    if (typeof this.opts.beforeClose === 'function') {\n      var close = this.opts.beforeClose.call(this)\n      if (!close) {\n        this._busy(false)\n        return\n      }\n    }\n\n    document.body.classList.remove('tingle-enabled')\n    document.body.style.top = null\n    window.scrollTo({\n      top: this._scrollPosition,\n      behavior: 'instant'\n    })\n\n    this.modal.classList.remove('tingle-modal--visible')\n\n    // using similar setup as onOpen\n    var self = this\n\n    self.modal.style.display = 'none'\n\n    // onClose callback\n    if (typeof self.opts.onClose === 'function') {\n      self.opts.onClose.call(this)\n    }\n\n    // release modal\n    self._busy(false)\n  }\n\n  Modal.prototype.setContent = function (content) {\n    // check type of content : String or Node\n    if (typeof content === 'string') {\n      this.modalBoxContent.innerHTML = content\n    } else {\n      this.modalBoxContent.innerHTML = ''\n      this.modalBoxContent.appendChild(content)\n    }\n\n    if (this.isOpen()) {\n      // check if modal is bigger than screen height\n      this.checkOverflow()\n    }\n\n    return this\n  }\n\n  Modal.prototype.getContent = function () {\n    return this.modalBoxContent\n  }\n\n  Modal.prototype.addFooter = function () {\n    // add footer to modal\n    _buildFooter.call(this)\n\n    return this\n  }\n\n  Modal.prototype.setFooterContent = function (content) {\n    // set footer content\n    this.modalBoxFooter.innerHTML = content\n\n    return this\n  }\n\n  Modal.prototype.getFooterContent = function () {\n    return this.modalBoxFooter\n  }\n\n  Modal.prototype.setStickyFooter = function (isSticky) {\n    // if the modal is smaller than the viewport height, we don't need sticky\n    if (!this.isOverflow()) {\n      isSticky = false\n    }\n\n    if (isSticky) {\n      if (this.modalBox.contains(this.modalBoxFooter)) {\n        this.modalBox.removeChild(this.modalBoxFooter)\n        this.modal.appendChild(this.modalBoxFooter)\n        this.modalBoxFooter.classList.add('tingle-modal-box__footer--sticky')\n        _recalculateFooterPosition.call(this)\n        this.modalBoxContent.style['padding-bottom'] = this.modalBoxFooter.clientHeight + 20 + 'px'\n      }\n    } else if (this.modalBoxFooter) {\n      if (!this.modalBox.contains(this.modalBoxFooter)) {\n        this.modal.removeChild(this.modalBoxFooter)\n        this.modalBox.appendChild(this.modalBoxFooter)\n        this.modalBoxFooter.style.width = 'auto'\n        this.modalBoxFooter.style.left = ''\n        this.modalBoxContent.style['padding-bottom'] = ''\n        this.modalBoxFooter.classList.remove('tingle-modal-box__footer--sticky')\n      }\n    }\n\n    return this\n  }\n\n  Modal.prototype.addFooterBtn = function (label, cssClass, callback) {\n    var btn = document.createElement('button')\n\n    // set label\n    btn.innerHTML = label\n\n    // bind callback\n    btn.addEventListener('click', callback)\n\n    if (typeof cssClass === 'string' && cssClass.length) {\n      // add classes to btn\n      cssClass.split(' ').forEach(function (item) {\n        btn.classList.add(item)\n      })\n    }\n\n    this.modalBoxFooter.appendChild(btn)\n\n    return btn\n  }\n\n  Modal.prototype.resize = function () {\n    // eslint-disable-next-line no-console\n    console.warn('Resize is deprecated and will be removed in version 1.0')\n  }\n\n  Modal.prototype.isOverflow = function () {\n    var viewportHeight = window.innerHeight\n    var modalHeight = this.modalBox.clientHeight\n\n    return modalHeight >= viewportHeight\n  }\n\n  Modal.prototype.checkOverflow = function () {\n    // only if the modal is currently shown\n    if (this.modal.classList.contains('tingle-modal--visible')) {\n      if (this.isOverflow()) {\n        this.modal.classList.add('tingle-modal--overflow')\n      } else {\n        this.modal.classList.remove('tingle-modal--overflow')\n      }\n\n      // tODO: remove offset\n      // _offset.call(this);\n      if (!this.isOverflow() && this.opts.stickyFooter) {\n        this.setStickyFooter(false)\n      } else if (this.isOverflow() && this.opts.stickyFooter) {\n        _recalculateFooterPosition.call(this)\n        this.setStickyFooter(true)\n      }\n    }\n  }\n\n  /* ----------------------------------------------------------- */\n  /* == private methods */\n  /* ----------------------------------------------------------- */\n\n  function closeIcon () {\n    return '<svg viewBox=\"0 0 10 10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M.3 9.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3L5 6.4l3.3 3.3c.2.2.5.3.7.3.2 0 .5-.1.7-.3.4-.4.4-1 0-1.4L6.4 5l3.3-3.3c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L5 3.6 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4L3.6 5 .3 8.3c-.4.4-.4 1 0 1.4z\" fill=\"#000\" fill-rule=\"nonzero\"/></svg>'\n  }\n\n  function _recalculateFooterPosition () {\n    if (!this.modalBoxFooter) {\n      return\n    }\n    this.modalBoxFooter.style.width = this.modalBox.clientWidth + 'px'\n    this.modalBoxFooter.style.left = this.modalBox.offsetLeft + 'px'\n  }\n\n  function _build () {\n    // wrapper\n    this.modal = document.createElement('div')\n    this.modal.classList.add('tingle-modal')\n\n    // remove cusor if no overlay close method\n    if (this.opts.closeMethods.length === 0 || this.opts.closeMethods.indexOf('overlay') === -1) {\n      this.modal.classList.add('tingle-modal--noOverlayClose')\n    }\n\n    this.modal.style.display = 'none'\n\n    // custom class\n    this.opts.cssClass.forEach(function (item) {\n      if (typeof item === 'string') {\n        this.modal.classList.add(item)\n      }\n    }, this)\n\n    // close btn\n    if (this.opts.closeMethods.indexOf('button') !== -1) {\n      this.modalCloseBtn = document.createElement('button')\n      this.modalCloseBtn.type = 'button'\n      this.modalCloseBtn.classList.add('tingle-modal__close')\n\n      this.modalCloseBtnIcon = document.createElement('span')\n      this.modalCloseBtnIcon.classList.add('tingle-modal__closeIcon')\n      this.modalCloseBtnIcon.innerHTML = closeIcon()\n\n      this.modalCloseBtnLabel = document.createElement('span')\n      this.modalCloseBtnLabel.classList.add('tingle-modal__closeLabel')\n      this.modalCloseBtnLabel.innerHTML = this.opts.closeLabel\n\n      this.modalCloseBtn.appendChild(this.modalCloseBtnIcon)\n      this.modalCloseBtn.appendChild(this.modalCloseBtnLabel)\n    }\n\n    // modal\n    this.modalBox = document.createElement('div')\n    this.modalBox.classList.add('tingle-modal-box')\n\n    // modal box content\n    this.modalBoxContent = document.createElement('div')\n    this.modalBoxContent.classList.add('tingle-modal-box__content')\n\n    this.modalBox.appendChild(this.modalBoxContent)\n\n    if (this.opts.closeMethods.indexOf('button') !== -1) {\n      this.modal.appendChild(this.modalCloseBtn)\n    }\n\n    this.modal.appendChild(this.modalBox)\n  }\n\n  function _buildFooter () {\n    this.modalBoxFooter = document.createElement('div')\n    this.modalBoxFooter.classList.add('tingle-modal-box__footer')\n    this.modalBox.appendChild(this.modalBoxFooter)\n  }\n\n  function _bindEvents () {\n    this._events = {\n      clickCloseBtn: this.close.bind(this),\n      clickOverlay: _handleClickOutside.bind(this),\n      resize: this.checkOverflow.bind(this),\n      keyboardNav: _handleKeyboardNav.bind(this)\n    }\n\n    if (this.opts.closeMethods.indexOf('button') !== -1) {\n      this.modalCloseBtn.addEventListener('click', this._events.clickCloseBtn)\n    }\n\n    this.modal.addEventListener('mousedown', this._events.clickOverlay)\n    window.addEventListener('resize', this._events.resize)\n    document.addEventListener('keydown', this._events.keyboardNav)\n  }\n\n  function _handleKeyboardNav (event) {\n    // escape key\n    if (this.opts.closeMethods.indexOf('escape') !== -1 && event.which === 27 && this.isOpen()) {\n      this.close()\n    }\n  }\n\n  function _handleClickOutside (event) {\n    // on macOS, click on scrollbar (hidden mode) will trigger close event so we need to bypass this behavior by detecting scrollbar mode\n    var scrollbarWidth = this.modal.offsetWidth - this.modal.clientWidth\n    var clickedOnScrollbar = event.clientX >= this.modal.offsetWidth - 15 // 15px is macOS scrollbar default width\n    var isScrollable = this.modal.scrollHeight !== this.modal.offsetHeight\n    if (navigator.platform === 'MacIntel' && scrollbarWidth === 0 && clickedOnScrollbar && isScrollable) {\n      return\n    }\n\n    // if click is outside the modal\n    if (this.opts.closeMethods.indexOf('overlay') !== -1 && !_findAncestor(event.target, 'tingle-modal') &&\n        event.clientX < this.modal.clientWidth) {\n      this.close()\n    }\n  }\n\n  function _findAncestor (el, cls) {\n    while ((el = el.parentElement) && !el.classList.contains(cls));\n    return el\n  }\n\n  function _unbindEvents () {\n    if (this.opts.closeMethods.indexOf('button') !== -1) {\n      this.modalCloseBtn.removeEventListener('click', this._events.clickCloseBtn)\n    }\n    this.modal.removeEventListener('mousedown', this._events.clickOverlay)\n    window.removeEventListener('resize', this._events.resize)\n    document.removeEventListener('keydown', this._events.keyboardNav)\n  }\n\n  /* ----------------------------------------------------------- */\n  /* == helpers */\n  /* ----------------------------------------------------------- */\n\n  function extend () {\n    for (var i = 1; i < arguments.length; i++) {\n      for (var key in arguments[i]) {\n        if (arguments[i].hasOwnProperty(key)) {\n          arguments[0][key] = arguments[i][key]\n        }\n      }\n    }\n    return arguments[0]\n  }\n\n  /* ----------------------------------------------------------- */\n  /* == return */\n  /* ----------------------------------------------------------- */\n\n  return {\n    modal: Modal\n  }\n}))\n"]}